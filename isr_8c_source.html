<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>UnnamedOS: src/kernel/interrupts/isr.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UnnamedOS
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('isr_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">isr.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="isr_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;common.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="isr_8h.html">interrupts/isr.h</a>&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="idt_8h.html">interrupts/idt.h</a>&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="pic_8h.html">interrupts/pic.h</a>&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="kernel_2interrupts_2syscall_8h.html">interrupts/syscall.h</a>&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;hardware/pit.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;hardware/io/ps2.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;syscall.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="group__isr.html#gaf8ef2d2c25d1037829a704b1e76bccaf">   26</a></span>&#160;<span class="preprocessor">#define IS_EXCEPTION(intr) ((intr) &lt;= 0x1F)</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#define IS_IRQ(intr)       ((intr) &gt;= 0x20 &amp;&amp; intr &lt;= 0x2F)</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define IS_SYSCALL(intr)   ((intr) == 0x30)</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="group__isr.html#ga0e2f07167b5d6a81dc391faad9ac04b7">   33</a></span>&#160;<span class="keyword">static</span> <a class="code" href="group__isr.html#ga53e098b9982ba973d78c35f1e239870f">isr_handler_t</a> <a class="code" href="group__isr.html#ga0e2f07167b5d6a81dc391faad9ac04b7">handlers</a>[<a class="code" href="group__idt.html#ga2a59a505aa55f15c152f30f811fbd310">IDT_ENTRIES</a>] = {0};</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="group__isr.html#ga5782dd52a9d132179ec591748e8e62e4">   35</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code" href="group__isr.html#ga5782dd52a9d132179ec591748e8e62e4">syscalls</a>[SYSCALL_NUMBER] = {0};</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="group__isr.html#ga0134a3b7354debd139c8fd0d7efc3e05">   42</a></span>&#160;uint8_t <a class="code" href="group__isr.html#ga0134a3b7354debd139c8fd0d7efc3e05">isr_enable_interrupts</a>(uint8_t enable) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    uint8_t <a class="code" href="group__vmm.html#ga03a51665f5606322b507e491b26a4c27">old_interrupts</a> = <a class="code" href="group__isr.html#gabeba9dfd0275f78fc2a6c2aa44b2ed52">isr_get_interrupts</a>();</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">if</span> (enable &amp;&amp; !old_interrupts) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;sti&quot;</span>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!enable &amp;&amp; old_interrupts)</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;cli&quot;</span>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__vmm.html#ga03a51665f5606322b507e491b26a4c27">old_interrupts</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="group__isr.html#gabeba9dfd0275f78fc2a6c2aa44b2ed52">   55</a></span>&#160;uint8_t <a class="code" href="group__isr.html#gabeba9dfd0275f78fc2a6c2aa44b2ed52">isr_get_interrupts</a>() {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="unionisr__eflags__t.html">isr_eflags_t</a> eflags;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;pushfl; pop %%eax; mov %%eax, %0&quot;</span> : <span class="stringliteral">&quot;=r&quot;</span> (eflags.<a class="code" href="unionisr__eflags__t.html#ad01569262f4624ba137ef4ac1a5af1ed">dword</a>));</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">return</span> eflags.<a class="code" href="unionisr__eflags__t.html#a94976201e7e5a244e2d9f9f689b59eeb">bits</a>.<a class="code" href="unionisr__eflags__t.html#aee9e488f7445d942039a480b9e267650">_if</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="group__isr.html#ga2cb4bb8ef9beea9f591bc9d4956e0933">   66</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__isr.html#ga2cb4bb8ef9beea9f591bc9d4956e0933">isr_register_handler</a>(<span class="keywordtype">size_t</span> intr, <a class="code" href="group__isr.html#ga53e098b9982ba973d78c35f1e239870f">isr_handler_t</a> handler) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (intr &gt;= <a class="code" href="group__idt.html#ga2a59a505aa55f15c152f30f811fbd310">IDT_ENTRIES</a>) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        println(<span class="stringliteral">&quot;%4ainterrupt vector %d not allowed%a&quot;</span>, intr);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="group__isr.html#ga0e2f07167b5d6a81dc391faad9ac04b7">handlers</a>[intr] = handler;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="group__isr.html#ga05c3ad46c49d4fbdd8ecad7ed05222d6">   80</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__isr.html#ga05c3ad46c49d4fbdd8ecad7ed05222d6">isr_register_syscall</a>(<span class="keywordtype">size_t</span> <span class="keywordtype">id</span>, <span class="keywordtype">void</span>* syscall) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt;= SYSCALL_NUMBER) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        println(<span class="stringliteral">&quot;%4asyscall %d not allowed%a&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="group__isr.html#ga5782dd52a9d132179ec591748e8e62e4">syscalls</a>[id] = syscall;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="group__isr.html#ga6c58ec453a854ea18c7fcbb9060aa5e7">  102</a></span>&#160;<a class="code" href="structcpu__state__t.html">cpu_state_t</a>* <a class="code" href="group__isr.html#ga6c58ec453a854ea18c7fcbb9060aa5e7">isr_handle_interrupt</a>(<a class="code" href="structcpu__state__t.html">cpu_state_t</a>* cpu) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    uint32_t intr = cpu-&gt;<a class="code" href="structcpu__state__t.html#afb9bb4960a83b78e7026e0ba67bce33a">intr</a>; <span class="comment">// save intr so we might change the cpu state</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__isr.html#ga0e2f07167b5d6a81dc391faad9ac04b7">handlers</a>[intr])</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        cpu = <a class="code" href="group__isr.html#ga0e2f07167b5d6a81dc391faad9ac04b7">handlers</a>[intr](cpu); <span class="comment">// execute a handler if registered</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__isr.html#gaf8ef2d2c25d1037829a704b1e76bccaf">IS_EXCEPTION</a>(intr))</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            panic(<span class="stringliteral">&quot;%4aEX%02x (EIP=%08x)&quot;</span>, intr, cpu-&gt;<a class="code" href="structcpu__state__t.html#a62f072d1b46c7606e35a6c3520cab089">eip</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__isr.html#ga16d673e025ce403f4151801f0aad1cb0">IS_IRQ</a>(intr))</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            print(<span class="stringliteral">&quot;%2aIRQ%d%a&quot;</span>, intr - <a class="code" href="group__isr.html#ga7b1e57aa4da8fae3bdb1d86f21a7621e">ISR_IRQ</a>(0));</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__isr.html#ga4f05c610d29d284ddd8dd60c003cac41">IS_SYSCALL</a>(intr))</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            print(<span class="stringliteral">&quot;%4aSYS%08x%a&quot;</span>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__isr.html#ga16d673e025ce403f4151801f0aad1cb0">IS_IRQ</a>(intr))</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="group__pic.html#ga1447c16a8430c10b413493be91981eb8">pic_send_eoi</a>(intr);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> cpu;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="group__isr.html#ga5135eedf491e0518505d64d26f72cd8b">  123</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__isr.html#ga5135eedf491e0518505d64d26f72cd8b">isr_dump_cpu</a>(<a class="code" href="structcpu__state__t.html">cpu_state_t</a>* cpu) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    logln(<span class="stringliteral">&quot;ISR&quot;</span>, <span class="stringliteral">&quot;uss=%08x usp=%08x efl=%08x  cs=    %04x eip=%08x err=%08x &quot;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="stringliteral">&quot;int=%08x eax=%08x ecx=%08x edx=%08x&quot;</span>,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            cpu-&gt;<a class="code" href="structcpu__state__t.html#adef74db41b2910d85b4baa3bbbd88787">user_ss</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#a443c2492e90c63346da77433c50f04c1">user_esp</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#acdb3a995b627aed6d0bd53af6b821390">eflags</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ac304467ab6a7cfc3efbe97f0ee1d521c">cs</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#a62f072d1b46c7606e35a6c3520cab089">eip</a>,</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            cpu-&gt;<a class="code" href="structcpu__state__t.html#a51efc815074c10b8b432836b82812ff7">error</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#afb9bb4960a83b78e7026e0ba67bce33a">intr</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#aec2df5ec585c749762a93c6fbf9e94fd">ecx</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a0da79ca5a4eb8fbb9c19650fd9e9cca8">edx</a>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    logln(<span class="stringliteral">&quot;ISR&quot;</span>, <span class="stringliteral">&quot;ebx=%08x esp=%08x ebp=%08x esi=%08x edi=%08x  &quot;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="stringliteral">&quot;ds=    %04x  es=    %04x  fs=    %04x  gs=    %04x&quot;</span>,</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#af7cd9d56b1c16f7502ae47336e7900b7">ebx</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#ac9635f0fefe448f0f50ff92ddb0b438e">esp</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#af3764bb8582a64feecab2eb5aed1dfad">ebp</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a39ded3dacaede6842a179259e20aacc2">esi</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a43ef8e8c2b6c91a60e9695a97c549368">edi</a>,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            cpu-&gt;<a class="code" href="structcpu__state__t.html#ab59fc3b798946fd095ecd280cd83a6bf">ds</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ace2ab3ae6dad96448e40f645e453c55b">es</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#aeb2a3c34f2ae82be1b5b55e9e5149bba">fs</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#a8c0f19fb6fcc71b11aef03d4230412c4">gs</a>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="group__isr.html#ga7223b89b988ccb66e749031e40612e79">  139</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structcpu__state__t.html">cpu_state_t</a>* <a class="code" href="group__isr.html#ga7223b89b988ccb66e749031e40612e79">isr_handle_syscall</a>(<a class="code" href="structcpu__state__t.html">cpu_state_t</a>* cpu) {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a> &lt; SYSCALL_NUMBER &amp;&amp; <a class="code" href="group__isr.html#ga5782dd52a9d132179ec591748e8e62e4">syscalls</a>[cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a>]) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="structcpu__state__t.html">cpu_state_t</a>* old_cpu = cpu;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        uint32_t ret = ((<a class="code" href="group__isr.html#gac1e68fa46321ddc76670ba7e9ab2afe6">isr_syscall_t</a>) <a class="code" href="group__isr.html#ga5782dd52a9d132179ec591748e8e62e4">syscalls</a>[cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a>])</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            (cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#af7cd9d56b1c16f7502ae47336e7900b7">ebx</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#aec2df5ec585c749762a93c6fbf9e94fd">ecx</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a0da79ca5a4eb8fbb9c19650fd9e9cca8">edx</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a39ded3dacaede6842a179259e20aacc2">esi</a>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a43ef8e8c2b6c91a60e9695a97c549368">edi</a>, &amp;cpu);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> (cpu == old_cpu)   <span class="comment">// change EAX only if we didn&#39;t switch tasks,</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a> = ret; <span class="comment">// otherwise tasks might run havoc!</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        println(<span class="stringliteral">&quot;%4aUnknown syscall %08x%a&quot;</span>, cpu-&gt;<a class="code" href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">r</a>.<a class="code" href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">eax</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> cpu;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="group__isr.html#ga2ea31f33125954459edbe7f4d7971ffa">  152</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__isr.html#ga2ea31f33125954459edbe7f4d7971ffa">isr_init</a>() {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    print(<span class="stringliteral">&quot;ISR init ... &quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="group__isr.html#ga2cb4bb8ef9beea9f591bc9d4956e0933">isr_register_handler</a>(<a class="code" href="group__isr.html#ga6dd35a9bec14e02e69bf8df3ab411a94">ISR_SYSCALL</a>, <a class="code" href="group__isr.html#ga7223b89b988ccb66e749031e40612e79">isr_handle_syscall</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="group__syscall.html#ga581ed37968ead91b6d3a0b3b7a71da9d">syscall_init</a>();</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="group__isr.html#ga0134a3b7354debd139c8fd0d7efc3e05">isr_enable_interrupts</a>(1);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    println(<span class="stringliteral">&quot;%2aok%a.&quot;</span>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="ttc" id="kernel_2interrupts_2syscall_8h_html"><div class="ttname"><a href="kernel_2interrupts_2syscall_8h.html">syscall.h</a></div></div>
<div class="ttc" id="group__isr_html_ga5135eedf491e0518505d64d26f72cd8b"><div class="ttname"><a href="group__isr.html#ga5135eedf491e0518505d64d26f72cd8b">isr_dump_cpu</a></div><div class="ttdeci">void isr_dump_cpu(cpu_state_t *cpu)</div><div class="ttdoc">Dumps a CPU state. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00123">isr.c:123</a></div></div>
<div class="ttc" id="pic_8h_html"><div class="ttname"><a href="pic_8h.html">pic.h</a></div></div>
<div class="ttc" id="group__isr_html_ga0134a3b7354debd139c8fd0d7efc3e05"><div class="ttname"><a href="group__isr.html#ga0134a3b7354debd139c8fd0d7efc3e05">isr_enable_interrupts</a></div><div class="ttdeci">uint8_t isr_enable_interrupts(uint8_t enable)</div><div class="ttdoc">Enables or disables interrupts. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00042">isr.c:42</a></div></div>
<div class="ttc" id="structcpu__state__t_html_a8c0f19fb6fcc71b11aef03d4230412c4"><div class="ttname"><a href="structcpu__state__t.html#a8c0f19fb6fcc71b11aef03d4230412c4">cpu_state_t::gs</a></div><div class="ttdeci">uint16_t gs</div><div class="ttdoc">GS segment register. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00060">isr.h:60</a></div></div>
<div class="ttc" id="group__isr_html_ga6c58ec453a854ea18c7fcbb9060aa5e7"><div class="ttname"><a href="group__isr.html#ga6c58ec453a854ea18c7fcbb9060aa5e7">isr_handle_interrupt</a></div><div class="ttdeci">cpu_state_t * isr_handle_interrupt(cpu_state_t *cpu)</div><div class="ttdoc">Handles all interrupts. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00102">isr.c:102</a></div></div>
<div class="ttc" id="isr_8h_html"><div class="ttname"><a href="isr_8h.html">isr.h</a></div></div>
<div class="ttc" id="group__isr_html_ga0e2f07167b5d6a81dc391faad9ac04b7"><div class="ttname"><a href="group__isr.html#ga0e2f07167b5d6a81dc391faad9ac04b7">handlers</a></div><div class="ttdeci">static isr_handler_t handlers[IDT_ENTRIES]</div><div class="ttdoc">a table that associates interrupt vectors with handlers </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00033">isr.c:33</a></div></div>
<div class="ttc" id="group__isr_html_ga53e098b9982ba973d78c35f1e239870f"><div class="ttname"><a href="group__isr.html#ga53e098b9982ba973d78c35f1e239870f">isr_handler_t</a></div><div class="ttdeci">cpu_state_t *(* isr_handler_t)(cpu_state_t *cpu)</div><div class="ttdoc">Handles a specific interrupt. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00090">isr.h:90</a></div></div>
<div class="ttc" id="group__pic_html_ga1447c16a8430c10b413493be91981eb8"><div class="ttname"><a href="group__pic.html#ga1447c16a8430c10b413493be91981eb8">pic_send_eoi</a></div><div class="ttdeci">void pic_send_eoi(uint8_t intr)</div><div class="ttdoc">Sends an &quot;end of interrupt&quot; signal. </div><div class="ttdef"><b>Definition:</b> <a href="pic_8c_source.html#l00061">pic.c:61</a></div></div>
<div class="ttc" id="structisr__registers__t_html_a0da79ca5a4eb8fbb9c19650fd9e9cca8"><div class="ttname"><a href="structisr__registers__t.html#a0da79ca5a4eb8fbb9c19650fd9e9cca8">isr_registers_t::edx</a></div><div class="ttdeci">uint32_t edx</div><div class="ttdoc">data register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="idt_8h_html"><div class="ttname"><a href="idt_8h.html">idt.h</a></div></div>
<div class="ttc" id="group__isr_html_ga7223b89b988ccb66e749031e40612e79"><div class="ttname"><a href="group__isr.html#ga7223b89b988ccb66e749031e40612e79">isr_handle_syscall</a></div><div class="ttdeci">static cpu_state_t * isr_handle_syscall(cpu_state_t *cpu)</div><div class="ttdoc">Handles all syscalls. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00139">isr.c:139</a></div></div>
<div class="ttc" id="group__isr_html_gaf8ef2d2c25d1037829a704b1e76bccaf"><div class="ttname"><a href="group__isr.html#gaf8ef2d2c25d1037829a704b1e76bccaf">IS_EXCEPTION</a></div><div class="ttdeci">#define IS_EXCEPTION(intr)</div><div class="ttdoc">whether the given interrupt vector is an exception </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00026">isr.c:26</a></div></div>
<div class="ttc" id="structcpu__state__t_html"><div class="ttname"><a href="structcpu__state__t.html">cpu_state_t</a></div><div class="ttdoc">The CPU&amp;#39;s state when an interrupt occurs. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00058">isr.h:58</a></div></div>
<div class="ttc" id="group__isr_html_ga4f05c610d29d284ddd8dd60c003cac41"><div class="ttname"><a href="group__isr.html#ga4f05c610d29d284ddd8dd60c003cac41">IS_SYSCALL</a></div><div class="ttdeci">#define IS_SYSCALL(intr)  </div><div class="ttdoc">whether the given interrupt vector is the syscall </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00030">isr.c:30</a></div></div>
<div class="ttc" id="structisr__registers__t_html_ac9635f0fefe448f0f50ff92ddb0b438e"><div class="ttname"><a href="structisr__registers__t.html#ac9635f0fefe448f0f50ff92ddb0b438e">isr_registers_t::esp</a></div><div class="ttdeci">uint32_t esp</div><div class="ttdoc">stack pointer register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="group__vmm_html_ga03a51665f5606322b507e491b26a4c27"><div class="ttname"><a href="group__vmm.html#ga03a51665f5606322b507e491b26a4c27">old_interrupts</a></div><div class="ttdeci">static uint8_t old_interrupts</div><div class="ttdoc">for temporary modifications </div><div class="ttdef"><b>Definition:</b> <a href="vmm_8c_source.html#l00046">vmm.c:46</a></div></div>
<div class="ttc" id="group__isr_html_ga6dd35a9bec14e02e69bf8df3ab411a94"><div class="ttname"><a href="group__isr.html#ga6dd35a9bec14e02e69bf8df3ab411a94">ISR_SYSCALL</a></div><div class="ttdeci">#define ISR_SYSCALL</div><div class="ttdoc">the interrupt vector for the syscall </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00014">isr.h:14</a></div></div>
<div class="ttc" id="structcpu__state__t_html_adef74db41b2910d85b4baa3bbbd88787"><div class="ttname"><a href="structcpu__state__t.html#adef74db41b2910d85b4baa3bbbd88787">cpu_state_t::user_ss</a></div><div class="ttdeci">uint32_t user_ss</div><div class="ttdoc">stack segment (only pushed and popped in user space) </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00074">isr.h:74</a></div></div>
<div class="ttc" id="unionisr__eflags__t_html_aee9e488f7445d942039a480b9e267650"><div class="ttname"><a href="unionisr__eflags__t.html#aee9e488f7445d942039a480b9e267650">isr_eflags_t::_if</a></div><div class="ttdeci">uint8_t _if</div><div class="ttdoc">interrupt flag </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00019">isr.h:19</a></div></div>
<div class="ttc" id="group__isr_html_ga7b1e57aa4da8fae3bdb1d86f21a7621e"><div class="ttname"><a href="group__isr.html#ga7b1e57aa4da8fae3bdb1d86f21a7621e">ISR_IRQ</a></div><div class="ttdeci">#define ISR_IRQ(irq)        </div><div class="ttdoc">the interrupt vector for an IRQ </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00013">isr.h:13</a></div></div>
<div class="ttc" id="structcpu__state__t_html_a62f072d1b46c7606e35a6c3520cab089"><div class="ttname"><a href="structcpu__state__t.html#a62f072d1b46c7606e35a6c3520cab089">cpu_state_t::eip</a></div><div class="ttdeci">uint32_t eip</div><div class="ttdoc">the instruction to return to after the interrupt </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00068">isr.h:68</a></div></div>
<div class="ttc" id="group__isr_html_ga2cb4bb8ef9beea9f591bc9d4956e0933"><div class="ttname"><a href="group__isr.html#ga2cb4bb8ef9beea9f591bc9d4956e0933">isr_register_handler</a></div><div class="ttdeci">void isr_register_handler(size_t intr, isr_handler_t handler)</div><div class="ttdoc">Registers a handler to call whenever a given interrupt is fired. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00066">isr.c:66</a></div></div>
<div class="ttc" id="structcpu__state__t_html_ace2ab3ae6dad96448e40f645e453c55b"><div class="ttname"><a href="structcpu__state__t.html#ace2ab3ae6dad96448e40f645e453c55b">cpu_state_t::es</a></div><div class="ttdeci">uint16_t es</div><div class="ttdoc">ES segment register. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00060">isr.h:60</a></div></div>
<div class="ttc" id="group__isr_html_ga2ea31f33125954459edbe7f4d7971ffa"><div class="ttname"><a href="group__isr.html#ga2ea31f33125954459edbe7f4d7971ffa">isr_init</a></div><div class="ttdeci">void isr_init()</div><div class="ttdoc">Initializes syscalls and enables interrupts. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00152">isr.c:152</a></div></div>
<div class="ttc" id="group__isr_html_ga05c3ad46c49d4fbdd8ecad7ed05222d6"><div class="ttname"><a href="group__isr.html#ga05c3ad46c49d4fbdd8ecad7ed05222d6">isr_register_syscall</a></div><div class="ttdeci">void isr_register_syscall(size_t id, void *syscall)</div><div class="ttdoc">Registers a syscall handler to call whenever a specified syscall is requested. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00080">isr.c:80</a></div></div>
<div class="ttc" id="unionisr__eflags__t_html_ad01569262f4624ba137ef4ac1a5af1ed"><div class="ttname"><a href="unionisr__eflags__t.html#ad01569262f4624ba137ef4ac1a5af1ed">isr_eflags_t::dword</a></div><div class="ttdeci">uint32_t dword</div><div class="ttdoc">useful for casting </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00038">isr.h:38</a></div></div>
<div class="ttc" id="structisr__registers__t_html_a39ded3dacaede6842a179259e20aacc2"><div class="ttname"><a href="structisr__registers__t.html#a39ded3dacaede6842a179259e20aacc2">isr_registers_t::esi</a></div><div class="ttdeci">uint32_t esi</div><div class="ttdoc">source index register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="group__idt_html_ga2a59a505aa55f15c152f30f811fbd310"><div class="ttname"><a href="group__idt.html#ga2a59a505aa55f15c152f30f811fbd310">IDT_ENTRIES</a></div><div class="ttdeci">#define IDT_ENTRIES</div><div class="ttdoc">Number of entries in the IDT. </div><div class="ttdef"><b>Definition:</b> <a href="idt_8h_source.html#l00011">idt.h:11</a></div></div>
<div class="ttc" id="group__syscall_html_ga581ed37968ead91b6d3a0b3b7a71da9d"><div class="ttname"><a href="group__syscall.html#ga581ed37968ead91b6d3a0b3b7a71da9d">syscall_init</a></div><div class="ttdeci">void syscall_init()</div><div class="ttdoc">Initializes the syscall interface. </div><div class="ttdef"><b>Definition:</b> <a href="kernel_2interrupts_2syscall_8c_source.html#l00053">syscall.c:53</a></div></div>
<div class="ttc" id="structisr__registers__t_html_af3764bb8582a64feecab2eb5aed1dfad"><div class="ttname"><a href="structisr__registers__t.html#af3764bb8582a64feecab2eb5aed1dfad">isr_registers_t::ebp</a></div><div class="ttdeci">uint32_t ebp</div><div class="ttdoc">base pointer register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="structcpu__state__t_html_aeb2a3c34f2ae82be1b5b55e9e5149bba"><div class="ttname"><a href="structcpu__state__t.html#aeb2a3c34f2ae82be1b5b55e9e5149bba">cpu_state_t::fs</a></div><div class="ttdeci">uint16_t fs</div><div class="ttdoc">FS segment register. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00060">isr.h:60</a></div></div>
<div class="ttc" id="unionisr__eflags__t_html_a94976201e7e5a244e2d9f9f689b59eeb"><div class="ttname"><a href="unionisr__eflags__t.html#a94976201e7e5a244e2d9f9f689b59eeb">isr_eflags_t::bits</a></div><div class="ttdeci">struct isr_eflags_t::@8 bits</div><div class="ttdoc">bit field </div></div>
<div class="ttc" id="structisr__registers__t_html_a84ac1a65a06be5289ea256740998df79"><div class="ttname"><a href="structisr__registers__t.html#a84ac1a65a06be5289ea256740998df79">isr_registers_t::eax</a></div><div class="ttdeci">uint32_t eax</div><div class="ttdoc">accumulator register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="structcpu__state__t_html_ac304467ab6a7cfc3efbe97f0ee1d521c"><div class="ttname"><a href="structcpu__state__t.html#ac304467ab6a7cfc3efbe97f0ee1d521c">cpu_state_t::cs</a></div><div class="ttdeci">uint16_t cs</div><div class="ttdoc">the code segment to return to after the interrupt </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00071">isr.h:71</a></div></div>
<div class="ttc" id="structcpu__state__t_html_acdb3a995b627aed6d0bd53af6b821390"><div class="ttname"><a href="structcpu__state__t.html#acdb3a995b627aed6d0bd53af6b821390">cpu_state_t::eflags</a></div><div class="ttdeci">uint16_t isr_eflags_t eflags</div><div class="ttdoc">the EFLAGS register before the interrupt was fired </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00071">isr.h:71</a></div></div>
<div class="ttc" id="structisr__registers__t_html_af7cd9d56b1c16f7502ae47336e7900b7"><div class="ttname"><a href="structisr__registers__t.html#af7cd9d56b1c16f7502ae47336e7900b7">isr_registers_t::ebx</a></div><div class="ttdeci">uint32_t ebx</div><div class="ttdoc">base register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="unionisr__eflags__t_html"><div class="ttname"><a href="unionisr__eflags__t.html">isr_eflags_t</a></div><div class="ttdoc">The EFLAGS register. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00017">isr.h:17</a></div></div>
<div class="ttc" id="structisr__registers__t_html_a43ef8e8c2b6c91a60e9695a97c549368"><div class="ttname"><a href="structisr__registers__t.html#a43ef8e8c2b6c91a60e9695a97c549368">isr_registers_t::edi</a></div><div class="ttdeci">uint32_t edi</div><div class="ttdoc">destination index register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="structcpu__state__t_html_a51efc815074c10b8b432836b82812ff7"><div class="ttname"><a href="structcpu__state__t.html#a51efc815074c10b8b432836b82812ff7">cpu_state_t::error</a></div><div class="ttdeci">uint32_t error</div><div class="ttdoc">hold an error code if an error occured, otherwise 0 </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00068">isr.h:68</a></div></div>
<div class="ttc" id="structcpu__state__t_html_a443c2492e90c63346da77433c50f04c1"><div class="ttname"><a href="structcpu__state__t.html#a443c2492e90c63346da77433c50f04c1">cpu_state_t::user_esp</a></div><div class="ttdeci">uint32_t user_esp</div><div class="ttdoc">stack pointer (only pushed and popped in user space) </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00074">isr.h:74</a></div></div>
<div class="ttc" id="structcpu__state__t_html_ab59fc3b798946fd095ecd280cd83a6bf"><div class="ttname"><a href="structcpu__state__t.html#ab59fc3b798946fd095ecd280cd83a6bf">cpu_state_t::ds</a></div><div class="ttdeci">uint16_t ds</div><div class="ttdoc">DS segment register. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00060">isr.h:60</a></div></div>
<div class="ttc" id="structisr__registers__t_html_aec2df5ec585c749762a93c6fbf9e94fd"><div class="ttname"><a href="structisr__registers__t.html#aec2df5ec585c749762a93c6fbf9e94fd">isr_registers_t::ecx</a></div><div class="ttdeci">uint32_t ecx</div><div class="ttdoc">counter register </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00043">isr.h:43</a></div></div>
<div class="ttc" id="structcpu__state__t_html_afb9bb4960a83b78e7026e0ba67bce33a"><div class="ttname"><a href="structcpu__state__t.html#afb9bb4960a83b78e7026e0ba67bce33a">cpu_state_t::intr</a></div><div class="ttdeci">uint32_t intr</div><div class="ttdoc">the interrupt vector of the fired interrupt </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00068">isr.h:68</a></div></div>
<div class="ttc" id="group__isr_html_gac1e68fa46321ddc76670ba7e9ab2afe6"><div class="ttname"><a href="group__isr.html#gac1e68fa46321ddc76670ba7e9ab2afe6">isr_syscall_t</a></div><div class="ttdeci">uint32_t(* isr_syscall_t)(uint32_t ebx, uint32_t ecx, uint32_t edx, uint32_t esi, uint32_t edi, cpu_state_t **cpu)</div><div class="ttdoc">Handles a specific syscall. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00106">isr.h:106</a></div></div>
<div class="ttc" id="group__isr_html_gabeba9dfd0275f78fc2a6c2aa44b2ed52"><div class="ttname"><a href="group__isr.html#gabeba9dfd0275f78fc2a6c2aa44b2ed52">isr_get_interrupts</a></div><div class="ttdeci">uint8_t isr_get_interrupts()</div><div class="ttdoc">Returns whether interrupts are enabled or disabled. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00055">isr.c:55</a></div></div>
<div class="ttc" id="group__isr_html_ga16d673e025ce403f4151801f0aad1cb0"><div class="ttname"><a href="group__isr.html#ga16d673e025ce403f4151801f0aad1cb0">IS_IRQ</a></div><div class="ttdeci">#define IS_IRQ(intr)          </div><div class="ttdoc">whether the given interrupt vector is an IRQ </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00028">isr.c:28</a></div></div>
<div class="ttc" id="group__isr_html_ga5782dd52a9d132179ec591748e8e62e4"><div class="ttname"><a href="group__isr.html#ga5782dd52a9d132179ec591748e8e62e4">syscalls</a></div><div class="ttdeci">static void * syscalls[SYSCALL_NUMBER]</div><div class="ttdoc">a table that associates syscall IDs with handlers </div><div class="ttdef"><b>Definition:</b> <a href="isr_8c_source.html#l00035">isr.c:35</a></div></div>
<div class="ttc" id="structcpu__state__t_html_ad2224ea96bab20013c474eee66a7384b"><div class="ttname"><a href="structcpu__state__t.html#ad2224ea96bab20013c474eee66a7384b">cpu_state_t::r</a></div><div class="ttdeci">uint16_t isr_registers_t r</div><div class="ttdoc">The general purpose registers. </div><div class="ttdef"><b>Definition:</b> <a href="isr_8h_source.html#l00060">isr.h:60</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_cbd7f246bdf7dc0a50281a272327e6ed.html">kernel</a></li><li class="navelem"><a class="el" href="dir_28eb04e9df1311571808062ef119429a.html">interrupts</a></li><li class="navelem"><a class="el" href="isr_8c.html">isr.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
